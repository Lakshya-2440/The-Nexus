<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#000000" />
  <meta
    name="description"
    content="NEXUS - Advanced streaming entertainment platform"
  />
  <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
  <!-- Google Fonts: JetBrains Mono -->
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet" />
  <!--
    manifest.json provides metadata used when your web app is installed on a
    user's mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/
  -->
  <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <!--
      Notice the use of %PUBLIC_URL% in the tags above.
      It will be replaced with the URL of the `public` folder during the build.
      Only files inside the `public` folder can be referenced from the HTML.

      Unlike "/favicon.ico" or "favicon.ico", "%PUBLIC_URL%/favicon.ico" will
      work correctly both with client-side routing and a non-root public URL.
      Learn how to configure a non-root public URL by running `npm run build`.
    -->
    <title>NEXUS - Entertainment Matrix</title>
    
    <!-- NEXUS Error Suppression System -->
    <script>
      // Immediate Google Tag Manager protection - Execute ASAP
      (function() {
        'use strict';
        
        // Immediate Google Tag Manager mock before anything else loads
        window.googletag = window.googletag || {};
        window.googletag.cmd = window.googletag.cmd || [];
        window.googletag.destroySlots = window.googletag.destroySlots || function(slots) { 
          console.log('[NEXUS] googletag.destroySlots intercepted');
          return slots || []; 
        };
        
        // Immediately suppress any googletag errors
        if (window.console && window.console.error) {
          const originalError = window.console.error;
          window.console.error = function(...args) {
            const message = args.join(' ');
            if (message.includes('googletag') || message.includes('destroySlots')) {
              console.log('[NEXUS] Early googletag error suppressed:', message);
              return;
            }
            originalError.apply(console, args);
          };
        }

        // Block all Google Tag Manager and Analytics requests
        if (window.fetch) {
          const originalFetch = window.fetch;
          window.fetch = function(url, options) {
            if (typeof url === 'string' && (
              url.includes('googletagmanager.com') ||
              url.includes('gtm.js') ||
              url.includes('GTM-') ||
              url.includes('gtag') ||
              url.includes('analytics.js') ||
              url.includes('ga.js')
            )) {
              console.log('[NEXUS] Blocked GTM/Analytics request:', url);
              return Promise.reject(new Error('GTM request blocked by NEXUS'));
            }
            return originalFetch.apply(this, arguments);
          };
        }

        // Override XMLHttpRequest to block GTM requests
        if (window.XMLHttpRequest) {
          const originalXHROpen = XMLHttpRequest.prototype.open;
          XMLHttpRequest.prototype.open = function(method, url, async, user, password) {
            if (typeof url === 'string' && (
              url.includes('googletagmanager.com') ||
              url.includes('gtm.js') ||
              url.includes('GTM-') ||
              url.includes('gtag') ||
              url.includes('analytics.js') ||
              url.includes('ga.js')
            )) {
              console.log('[NEXUS] Blocked XHR GTM/Analytics request:', url);
              return;
            }
            return originalXHROpen.apply(this, arguments);
          };
        }

        // Block dynamic script injection for GTM
        if (document.createElement) {
          const originalCreateElement = document.createElement;
          document.createElement = function(tagName) {
            const element = originalCreateElement.apply(this, arguments);
            if (tagName === 'script') {
              const originalSetAttribute = element.setAttribute;
              element.setAttribute = function(name, value) {
                if (name === 'src' && typeof value === 'string' && (
                  value.includes('googletagmanager.com') ||
                  value.includes('gtm.js') ||
                  value.includes('GTM-') ||
                  value.includes('gtag') ||
                  value.includes('analytics.js') ||
                  value.includes('ga.js')
                )) {
                  console.log('[NEXUS] Blocked dynamic GTM script injection:', value);
                  return;
                }
                return originalSetAttribute.apply(this, arguments);
              };
            }
            return element;
          };
        }
      })();
    </script>
    
    <script>
      (function() {
        'use strict';
        
        // Comprehensive error suppression for video player and external services
        const NEXUS_SUPPRESSED_PATTERNS = [
          'ReferenceError: iwpzn8',
          'ReferenceError: cqwo4j',
          'ReferenceError: n7fhfw',
          'ReferenceError: aclib',
          'ReferenceError: fabuak',
          'ReferenceError: hioszq',
          'ReferenceError: ebflxe',
          'aclib is not defined',
          'jwplayer',
          'abort-current-inline-script',
          'autoPlay=true&poster=false',
          'VM[0-9]+:',
          'at get (<anonymous>',
          'Math.get (<anonymous>',
          'googletag.destroySlots is not a function',
          'TypeError: googletag.destroySlots is not a function',
          'googletag.destroySlots',
          'googletag',
          'TypeError: googletag',
          'Cannot read properties of undefined (reading \'destroySlots\')',
          'Cannot read property \'destroySlots\' of undefined',
          'ERR_UNSAFE_REDIRECT',
          'net::ERR_UNSAFE_REDIRECT',
          'Failed to load resource: net::ERR_UNSAFE_REDIRECT',
          'SW Ready',
          'Service worker has been registered',
          'chunk-vendors',
          'app.js',
          'pn (app.',
          'at pn (',
          'Firebase Analytics',
          'gtag',
          'gpt.js',
          'pubads.g.doubleclick.net'
        ];
        
        // Store original functions
        window._nexusOriginalError = console.error;
        window._nexusOriginalWarn = console.warn;
        window._nexusOriginalLog = console.log;
        
        // Enhanced Google Tag Manager mock to prevent errors
        if (!window.googletag) {
          window.googletag = {};
        }
        
        // Ensure cmd array exists
        window.googletag.cmd = window.googletag.cmd || [];
        
        // Enhanced mock with more comprehensive coverage and persistent protection
        const mockGoogletag = {
          destroySlots: function(slots) { 
            console.log('[NEXUS] googletag.destroySlots called (mocked)');
            return slots || []; 
          },
          display: function(divId) { 
            console.log('[NEXUS] googletag.display called (mocked):', divId);
            return this; 
          },
          enableServices: function() { 
            console.log('[NEXUS] googletag.enableServices called (mocked)');
            return this; 
          },
          disablePublisherConsole: function() { return this; },
          getVersion: function() { return '3.0'; },
          slots: [],
          pubads: function() {
            return {
              enableSingleRequest: function() { return this; },
              disableInitialLoad: function() { return this; },
              collapseEmptyDivs: function() { return this; },
              addEventListener: function() { return this; },
              setTargeting: function() { return this; },
              clearTargeting: function() { return this; },
              refresh: function() { return this; },
              clear: function() { return this; },
              getSlots: function() { return []; },
              setPrivacySettings: function() { return this; },
              setCookieOptions: function() { return this; }
            };
          },
          companionAds: function() {
            return {
              setRefreshUnfilledSlots: function() { return this; }
            };
          },
          defineSlot: function(adUnitPath, size, divId) {
            console.log('[NEXUS] googletag.defineSlot called (mocked):', adUnitPath, size, divId);
            return {
              addService: function() { return this; },
              setTargeting: function() { return this; },
              setCollapseEmptyDiv: function() { return this; },
              defineSizeMapping: function() { return this; },
              setForceSafeFrame: function() { return this; }
            };
          },
          defineOutOfPageSlot: function() {
            return {
              addService: function() { return this; }
            };
          },
          sizeMapping: function() {
            return {
              addSize: function() { return this; },
              build: function() { return []; }
            };
          }
        };

        // Apply the mock and make it persistent
        Object.assign(window.googletag, mockGoogletag);
        
        // Make the mock persistent against overwrites
        Object.defineProperty(window, 'googletag', {
          value: window.googletag,
          writable: false,
          configurable: false
        });
        
        // Enhanced console.error override with stack trace filtering
        console.error = function(...args) {
          const message = args.join(' ');
          const stack = (new Error()).stack || '';
          
          // Check if should suppress
          const shouldSuppress = NEXUS_SUPPRESSED_PATTERNS.some(pattern => {
            if (pattern.includes('[0-9]+')) {
              const regex = new RegExp(pattern.replace('[0-9]+', '\\d+'));
              return regex.test(message) || regex.test(stack);
            }
            return message.includes(pattern) || stack.includes(pattern);
          });
          
          // Special handling for googletag errors
          if (message.includes('googletag') || message.includes('destroySlots')) {
            console.log('[NEXUS] Suppressed Google Tag error:', message);
            return;
          }
          
          if (shouldSuppress) {
            // Silent suppression for video player errors
            return;
          }
          
          window._nexusOriginalError.apply(console, args);
        };
        
        // Enhanced console.warn override
        console.warn = function(...args) {
          const message = args.join(' ');
          
          const shouldSuppress = NEXUS_SUPPRESSED_PATTERNS.some(pattern => {
            return message.includes(pattern);
          });
          
          if (shouldSuppress) {
            return;
          }
          
          window._nexusOriginalWarn.apply(console, args);
        };
        
        // Enhanced console.log override for SW messages
        console.log = function(...args) {
          const message = args.join(' ');
          
          const shouldSuppress = NEXUS_SUPPRESSED_PATTERNS.some(pattern => {
            return message.includes(pattern);
          });
          
          if (shouldSuppress) {
            return;
          }
          
          window._nexusOriginalLog.apply(console, args);
        };
        
        // Global error handler with enhanced googletag filtering
        window.addEventListener('error', function(event) {
          const message = event.message || '';
          const source = event.filename || '';
          const stack = event.error?.stack || '';
          
          // Special handling for googletag errors
          if (message.includes('googletag') || message.includes('destroySlots') || 
              source.includes('googletag') || stack.includes('googletag')) {
            console.log('[NEXUS] Blocked Google Tag error:', message);
            event.preventDefault();
            event.stopPropagation();
            return false;
          }
          
          const shouldSuppress = NEXUS_SUPPRESSED_PATTERNS.some(pattern => {
            return message.includes(pattern) || source.includes('autoPlay=true') || 
                   message.includes('googletag') || stack.includes(pattern);
          });
          
          if (shouldSuppress) {
            event.preventDefault();
            event.stopPropagation();
            return false;
          }
        });
        
        // Unhandled promise rejection handler
        window.addEventListener('unhandledrejection', function(event) {
          const message = event.reason?.toString() || '';
          
          const shouldSuppress = NEXUS_SUPPRESSED_PATTERNS.some(pattern => {
            return message.includes(pattern);
          });
          
          if (shouldSuppress) {
            event.preventDefault();
            return false;
          }
        });
        
        console.log('%c[NEXUS]%c Error suppression system initialized', 
          'color: #ef4444; font-weight: bold; background: #1a1a1a; padding: 2px 6px; border-radius: 3px;', 
          'color: #22c55e;'
        );
      })();
    </script>
    
    <script>
      // Additional protection against disable-devtool and external scripts
      (function() {
        'use strict';
        
        // Block additional problematic URLs including disable-devtool
        const BLOCKED_URLS = [
          'theajack.github.io',
          'disable-devtool',
          'cordClip',
          'jwplayer',
          'adnxs.com',
          'adsystem.google.com',
          'doubleclick.net',
          'google-analytics.com',
          'googlesyndication.com'
        ];
        
        // Enhanced fetch blocking
        if (window.fetch) {
          const originalFetch = window.fetch;
          window.fetch = function(url, options) {
            if (typeof url === 'string') {
              const shouldBlock = BLOCKED_URLS.some(blocked => url.includes(blocked));
              if (shouldBlock) {
                console.log('[NEXUS] Blocked external request:', url);
                return Promise.reject(new Error('External request blocked by NEXUS'));
              }
            }
            return originalFetch.apply(this, arguments);
          };
        }

        // Enhanced XMLHttpRequest blocking
        if (window.XMLHttpRequest) {
          const originalXHROpen = XMLHttpRequest.prototype.open;
          XMLHttpRequest.prototype.open = function(method, url, async, user, password) {
            if (typeof url === 'string') {
              const shouldBlock = BLOCKED_URLS.some(blocked => url.includes(blocked));
              if (shouldBlock) {
                console.log('[NEXUS] Blocked XHR external request:', url);
                return;
              }
            }
            return originalXHROpen.apply(this, arguments);
          };
        }

        // Block dynamic script creation for external URLs
        const originalCreateElement = document.createElement;
        document.createElement = function(tagName) {
          const element = originalCreateElement.apply(this, arguments);
          if (tagName.toLowerCase() === 'script') {
            const originalSetSrc = Object.getOwnPropertyDescriptor(HTMLScriptElement.prototype, 'src');
            Object.defineProperty(element, 'src', {
              set: function(value) {
                if (typeof value === 'string') {
                  const shouldBlock = BLOCKED_URLS.some(blocked => value.includes(blocked));
                  if (shouldBlock) {
                    console.log('[NEXUS] Blocked dynamic script:', value);
                    return;
                  }
                }
                originalSetSrc.set.call(this, value);
              },
              get: function() {
                return originalSetSrc.get.call(this);
              }
            });
          }
          return element;
        };

        // Clear any problematic cache entries
        if ('caches' in window) {
          caches.keys().then(function(cacheNames) {
            cacheNames.forEach(function(cacheName) {
              if (cacheName.includes('disable-devtool') || cacheName.includes('theajack')) {
                caches.delete(cacheName);
                console.log('[NEXUS] Cleared problematic cache:', cacheName);
              }
            });
          });
        }

        console.log('[NEXUS] External script protection activated');
      })();
    </script>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <!--
      This HTML file is a template.
      If you open it directly in the browser, you will see an empty page.

      You can add webfonts, meta tags, or analytics to this file.
      The build step will place the bundled scripts into the <body> tag.

      To begin the development, run `npm start` or `yarn start`.
      To create a production bundle, use `npm run build` or `yarn build`.
    -->
  </body>
</html>
